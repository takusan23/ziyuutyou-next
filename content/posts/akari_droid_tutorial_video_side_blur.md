---
title: 自作動画編集アプリ チュートリアル 動画の両端をぼかした動画の作り方
created_at: 2025-02-06
tags:
- あかりどろいど
---
自作 Android アプリの取説というか、使い方です。初見じゃ分からんと思うので。  
専用のページを作るべきな気がしてきた。

# 今回作る動画！
はこちら。ショート動画でよくある、横向きの動画を縦向きの動画に編集したあれ！！。  
縦で余った上下の両端をブラーでぼかすってやつ。  

<iframe width="560" height="315" src="https://www.youtube.com/embed/O2UuEAascfo?si=9nlonqwroza2Di_H" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

# 環境
あかりどろいど`バージョン 4.1.2`段階の記事です。

# 手順
大まかな手順です。

- 動画を用意する（今回はすでにあるので！スキップ）
- アプリを入れる
- プロジェクトを作る
- 動画を追加する
- 動画を目一杯広げて、ぼかしを適用する
- 同じ動画を上に重ねて、今度は比率はそのまま合わせる
- 時間を調整
- ほぞん！

# アプリを入れる
リンクです。  
https://play.google.com/store/apps/details?id=io.github.takusan23.akaridroid

![Imgur](https://imgur.com/Wq4vBqo.png)

## メモ プライバシーポリシー
一応。ちなみにこのアプリはすべての処理が端末内で行われます。逆を言うとインターネットは不要ということです。  

https://takusan.negitoro.dev/pages/akari_droid_privacy_policy/

# プロジェクトを作る
新規作成から、適当な名前をつけてください。

![Imgur](https://imgur.com/U9aZqye.png)

# 解像度
今回は`横 1920 / 縦 1080`の動画を、そのまま縦に、`横 1080 / 縦 1920`にします。  
動画の時間は後から変更できるのでそのままにします。

![Imgur](https://imgur.com/p2aN5fc.png)

また、この下にある`10 ビット HDR`に関してですが、`10 ビット HDR`で撮影した動画を編集する場合はチェックを入れてください。  
わからない場合はとりあえずそのままでよいです。後からでも変更できます。

# 画面の説明

![Imgur](https://imgur.com/xgFJzcf.png)

上半分がプレビューの再生と、素材の位置と大きさ編集のための領域です。  
右上のボタンを切り替えることで、プレビューの再生に切り替えることが出来ます。  
再生は若干重いです（最後に保存する動画はちゃんとスムーズに再生されます。）。  

下半分がタイムラインです。`AviUtl`や`YMM4`のそれと似ています。  
タイムラインに表示させたい動画や写真、文字を追加すると、タイムラインのアイテムとしてレーンに追加されます。  
このアイテムは表示する時間と、長さ、また重なり順を表しています。

タイムラインの詳しい使い方は実際に触りながらやります。

# 動画を追加してみる
動画に追加する場合は、下の**追加**と書かれているボタンを押すことで追加できます。  
動画を追加したいので、**動画**を押します。

![Imgur](https://imgur.com/ph8Ji5v.png)

追加するとこのようなボトムシートが表示されます。  
ここでも位置合わせができるのですが、少しやりにくいため、一旦閉じてください。

![Imgur](https://imgur.com/3qbGIBt.png)

## メモ 編集を後でやりたい場合は
オートセーブになってるので、そのままアプリを閉じてもらって大丈夫です。

## メモ 間違えた場合
タイムライン上に追加された、動画を押して削除を押すことで消せます。  
同様に音声も消してください。

## メモ 音声だけ消したい場合
タイムライン上に追加された動画と音声に対して、音声を押して削除を押すことで、音声だけ削除ができます。  

※ 現状、タイムライン上に音声がない動画を保存する場合、無音の音声が入ることになります。  
そのため保存した動画から音声データ（トラック）自体が`mp4 / webm`から消えるわけではありません。

## メモ 10 ビット HDR と表示された場合
この場合は、`10 ビット HDR`動画を編集することになるので、画面に従って、有効にしてください。

![Imgur](https://imgur.com/wx7NjmQ.png)

## メモ 10 ビット HDR の詳細
現状（`バージョン 4.1.2`）、`HLG 形式`の`HDR 動画`に対応しています。  
これは`Sony Xperia`や`Google Pixel`が`HDR 動画`として採用している技術です。

一方`HLG`以外の形式である、`HDR10`と`HDR10+`にはまだ対応できていません。  
考え中です。どうしようかな。

# 位置を合わせる
右上のボタンで、指のアイコンを選んで編集モードに。  
黄色い枠を動かすと、素材を動かすことが出来ます。右下の白い四角形を掴んで動かすとサイズ変更です。

![Imgur](https://imgur.com/vWfDRCf.png)

サイズ変更して、画面に埋まるように目一杯広げます。あと真ん中に来るようにします。  
何も合わせる基準がないのですが頑張ってください（雑）

# ぼかしを追加する
タイムラインの下にある追加ボタンより、エフェクトを選びます。  
ここで`ブラー`を選ぶことで、動画素材をぼかせます。

![Imgur](https://imgur.com/QB8d4N4.png)

![Imgur](https://imgur.com/AiVIahh.png)

タイムラインにエフェクトが追加されましたが、時間が動画と合ってないので、棒を掴んで伸ばしましょう。

![Imgur](https://imgur.com/NlCPvKK.png)

# ぼかしてない動画を上に重ねる
もうゴールは近いです。  
次は何も加工していない、動画の比率をそのままにした動画を上に重ねます。

同じ動画を選んでもいいのですが、今回はタイムラインの複製機能を使ってみましょう。  
タイムライン上の動画素材を選んで、`複製`を押します。これでタイムラインの空いている部分に複製した動画が追加されるはずです。

![Imgur](https://imgur.com/ukyJaP2.png)

あとはこれを元のサイズに戻します。  
複製元と同じ位置にあるので移動して、大きさを下に戻してみてください。

# 再生してみる
再生モードに切り替え、再生してみてください。  
音声がｐｔｐｔしてたり、再生がスムーズにされない場合があるかもしれませんが、保存には影響しません。

![Imgur](https://imgur.com/zwY0Hmz.png)

# 動画の時間を設定する
再生モードをよく見ると、動画の時間が`01:00`と、一分になっています。（`AviUtl`のそれと同じあれです）  
これを動画の時間に合わせるために、タイムラインの`メニュー`を押し、`動画情報の編集`へ進みます。

![Imgur](https://imgur.com/dEVF0an.png)

そしたら、動画素材の時間に合わせて設定してください。一桁の場合は0埋めしてください。  
タイムライン上に、動画の終わりを表す青色の棒がでます。

![Imgur](https://imgur.com/Alm8F9e.png)

![Imgur](https://imgur.com/uEr9JzG.png)

# 保存する
タイムラインの下にあるメニューから、`動画を保存する`を選びます。  
特に理由がない場合はそのまま`保存を開始`を押してください。

![Imgur](https://imgur.com/YO2N3wR.png)

![Imgur](https://imgur.com/AGW2GOH.png)

こんなかんじに保存の進捗が表示されます。  
バックグラウンドで処理されているので他のアプリに切り替えてもエンコードが続行されます。

![Imgur](https://imgur.com/SzvPHc5.png)

## メモ 手動で設定
また、`手動で設定`を押すことでエンコード設定を自分で設定できるようにしてあります。  
玄人向けというか有識者向けです。

`おまかせ設定`で選んだあと、`手動で設定`を押すと設定内容が引き継がれていますので、そこで編集したい項目だけ編集してください。  
例えば元の動画が`60fps`の場合は、`フレームレート`の項目を`60`にしてください。

## メモ おまかせ設定を選んだときのエンコード設定
動画に詳しい人向け。  

技術者向け。  
ソースコード的にはここにあります：  
https://github.com/takusan23/AkariDroid/blob/c60d7cc23e455c6d08a921b9b043d005cbb3e85f/app/src/main/java/io/github/takusan23/akaridroid/encoder/EncoderParameters.kt#L111-L153

### SDR
`HDR 動画編集`を有効にしていない場合はこちらです。

| 項目             | 低          | 中          | 高          |
|------------------|-------------|-------------|-------------|
| コーデック       | H.264 (AVC) | H.264 (AVC) | H.264 (AVC) |
| ビットレート     | 2Mbps       | 6Mbps       | 12Mbps      |
| フレームレート   | 30fps       | 30fps       | 30fps       |
| キーフレーム間隔 | 1秒         | 1秒         | 1秒         |

### HDR
先述の通り、`HLG 形式`にしか対応できていません。。

| 項目                     | 低                 | 中                 | 高                 |
|--------------------------|--------------------|--------------------|--------------------|
| コーデック               | H.265 (HEVC)       | H.265 (HEVC)       | H.265 (HEVC)       |
| ビットレート             | 4Mbps              | 12Mbps             | 24Mbps             |
| フレームレート           | 30fps              | 30fps              | 30fps              |
| キーフレーム間隔         | 1秒                | 1秒                | 1秒                |
| 色域 (カラースペース)    | Rec.2020 (BT.2020) | Rec.2020 (BT.2020) | Rec.2020 (BT.2020) |
| 伝達関数（ガンマカーブ） | HLG                | HLG                | HLG                |

### 音声
音声は共通になります。

| 項目               | 値           |
|--------------------|--------------|
| コーデック         | AAC          |
| ビットレート       | 192Kbps      |
| サンプリングレート | 48,000Hz     |
| チャンネル数       | 2 (ステレオ) |

# 動画を見る
保存先は`動画フォルダー`の中の`AkariDroid`フォルダー内にあるはずです。  
詳細なパスとしては→`/storage/emulated/0/Movies/AkariDroid`にあります。

![Imgur](https://imgur.com/ShMflcc.png)

# おつかれさまでした！！
こんな感じに**縦動画で端がブラーになっている動画**を`Android スマートフォン`で作ることが出来ました。  
これを応用すれば`縦の動画`を`横にして左右の余白を埋める`事だって出来ます。

![Imgur](https://imgur.com/u8KaCt3.png)

あとは煮るなり焼くなり...

![Imgur](https://imgur.com/eH9IemI.png)

![Imgur](https://imgur.com/iEhzM84.png)

# おわりに
今回は動画だけでしたが、文字や画像なんかも追加できます。

## おまけ タイムラインの操作ガイド
長くなるので一番最後に。

タイムライン上のアイテムは、ドラッグすると表示する時間を変更でき、  
端を掴んで動かすと時間を調整。押すことで素材を分割や、複製、削除ができます。

動画の時間だけタイムラインを横にスクロールできます。  
細かい操作をしたい場合は虫眼鏡のマークを押すことで拡大、縮小ができます。  
虫眼鏡の隣の矢印ボタンはタイムラインの操作を戻す、戻すのを戻す（`undo と redo`）です。

タイムライン上の空いている部分を押すと、赤色の棒が押した部分に来ます。  
この赤い棒は上半分にあるプレビューの位置を表しています。  
また、逆に青色の棒は動画の終わりを表す棒です。`メニュー > 動画情報の編集`よりこの時間を伸ばしたり、縮めたり出来ます。  
この青色の線を超えたアイテムは動画として保存されません。終わりを表す棒なので。

画像編集ソフトのレイヤーのそれと同じく、下に行くに連れ上に重なります。  
1と2だったら、2が上に重なるということです。今のところ`20`レーン以上は増やせないです。需要があれば変更できるようにしようかなと思います。

今回使ったエフェクトなどの効果は、タイムラインのレーンの番号順に適用されます。  
例えば動画を1、エフェクトを2、写真を3番レーンにおいた場合、エフェクトが適用されるのは動画だけで、写真はそのまま動画になります。  
もし写真も含めて効果を適用したい場合は、最も大きいレーン番号に配置する必要があります。